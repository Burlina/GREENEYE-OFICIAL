<!DOCTYPE html>
<html lang="PT-br">

<head>
  <meta charset="UTF-8">
  <title>GreenEye - Login</title>

  <script src="./js/funcoes.js"></script>

  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="../assets/img/olhoolho.png" rel="icon">
  <link href="../assets/img/olhoolho.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="../assets/css/style-login.css" rel="stylesheet">

</head>

<body>
  <!-- START LOGIN -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <div class="content">
    <div class="box-login">

      <a href="index.html">
        <img id="img-back" src="../assets/img/login_cadastro/back_icon_green.png"></a>

      <div class="wrapper">
        <div class="title-text">

          <div class="title login">
            Login
          </div>
          <div class="title signup">
            Registrar-se
          </div>
        </div>
        <div class="form-container">
          <div class="slide-controls">
            <input type="radio" name="slide" id="login" checked>
            <input type="radio" name="slide" id="signup">
            <label for="login" class="slide login">Login</label>
            <label for="signup" class="slide signup">Cadastro</label>
            <div class="slider-tab"></div>
          </div>
          <div class="form-inner">
            <form action="#" class="login">
              <div class="field">
                <input id="email_input" type="text" placeholder="E-mail">
              </div>
              <div class="field">
                <input id="senha_input" type="password" placeholder="******">
              </div>
              <div class="pass-link">
                <p>Máximo de 10 caracteres</p>
              </div>
              <div class="field">
                <select name="" id="">
                  <option value="">Selecione o cargo</option>
                  <option value="">Administrador</option>
                  <option value="">Funcionario</option>
                  <option value="">Dev</option>
                </select>
              </div>
              <div class="field btn">
                <div class="btn-layer"></div>
                <input type="submit" value="Acessar">
              </div>
              <div class="signup-link">
                Não possui conta? <a href="index.html">Cadastre-se</a>
              </div>
            </form>
            <form action="#" class="signup">
              <div class="field">
                <h6>Para cadastrar sua empresa, entre em <br> contato com nossa equipe.
                  <a href="index.html#contact" id="link-contato">Saiba Mais</a>
                </h6>
              </div>
            </form>
          </div>
        </div>
      </div>

      <script>
        const loginText = document.querySelector(".title-text .login");
        const loginForm = document.querySelector("form.login");
        const loginBtn = document.querySelector("label.login");
        const signupBtn = document.querySelector("label.signup");
        const signupLink = document.querySelector("form .signup-link a");
        signupBtn.onclick = (() => {
          loginForm.style.marginLeft = "-50%";
          loginText.style.marginLeft = "-50%";
        });
        loginBtn.onclick = (() => {
          loginForm.style.marginLeft = "0%";
          loginText.style.marginLeft = "0%";
        });
        signupLink.onclick = (() => {
          signupBtn.click();
          return false;
        });
      </script>
    </div>
  </div>
  </div>
  <!-- link: https://codepen.io/jando132456/pen/JjLZXYK -->
  <!-- END LOGIN -->

  <!-- Vendor JS Files -->
  <script src="../assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="../assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="../assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="../assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="../assets/js/main.js"></script>
</body>

</html>
<script src="../assets/js/redirecionamento.js"></script>

<script>
  let girar1 = girar.value
	var loginButton = document.getElementById('login');
	// function logar() {
	// 	let logemail = logemail.value
	// 	let logpass = logpass.value
	// 	let logpermissoes = logpermissoes.value
	// 	// loginButton.href = './cadEmpresa.html'

	// 	if (logemail == "" || logpass == "") {
	// 		alert("Seus dados não coferem!");
	// 		return false;
	// 	} else if (logpermissoes == "111") {
	// 		loginButton = "../dashboard.html";
	// 	} else if (logpermissoes == "222") {
	// 		loginButton = "../dashboard.html";
	// 	}else if (logpermissoes == "333") {
    //         loginButton = "../cadEmpresa.html";
	// 	}else {
    //         loginButton.href = "../";
	// 	}
	// }

	// 			else {
	// 				throw ("Houve um erro ao tentar realizar o cadastro!");
	// 			}
	// 		}).catch(function (resposta) {
	// 			console.log(`#ERRO: ${resposta}`);

	// 		});

	// 		return false;

	
    function logar() {
        // aguardar();

        var logEmail = logemail.value;
		var logPass = logpass.value;
		var logPermissoes = logpermissoes.value;

		var loginButton = document.getElementById('login');

        // TODO: VERIFICAR AS VALIDAÇÕES QUE ELES ESTÃO APRENDENDO EM ALGORITMOS 
        if (logEmail == "" || logPass == "" || logPermissoes == "") {
			alert("Seus dados não coferem!");
			return false;
		}

        console.log("FORM LOGIN: ", logemail);
        console.log("FORM SENHA: ", logpass);
        console.log("FORM USUARIO: ", logpermissoes);


        fetch("/usuarios/autenticar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                logemailServer: logEmail,
                logpassServer: logPass,
                logpermissoesServer: logPermissoes
            })
        }).then(function (resposta) {
            console.log("ESTOU NO THEN DO entrar()!")

			if (resposta.ok) {
                console.log(resposta);

                resposta.json().then(json => {
                    console.log(json);
                    console.log(JSON.stringify(json));

                    sessionStorage.logemail = json.logEmail;
                    sessionStorage.logpass = json.logPass;
                    sessionStorage.logpermissoes = json.logPermissoes;

                    setTimeout(function ()
					{if (logPermissoes == "111") {
						window.location = "../dashboardTeste.html";
    } else if (logPermissoes == "222") {
		window.location = "../funDash.html";
    }else if (logPermissoes == "333") {
        window.location = "../cadEmpresa.html";
    }else {
		window.location = "../";
		}})
	})}

        }).catch(function (erro) {
            console.log(erro);
        })

        return false;
    }

				function girar() {
						girar1
					}


    function sumirMensagem() {
        cardErro.style.display = "none"
    }

</script>